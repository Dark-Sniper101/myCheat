let N = 0;
let H;

function setup() {
    frameRate(60);
    createCanvas(1000, 400);
    H = makeH();
}

function makeH() {
    const H = [BigInt(0), BigInt(0), BigInt(0), BigInt(0), BigInt(0), BigInt(0), BigInt(0), BigInt(0), BigInt(0)];
    "3,5,1,5,3,2,1,3,4,2,5,1,3,3,2,5,1,3,1,5,5,1,1,1,2,4,1,4,5,2,1,2,4,3,1,2,3,4,3,4,4,5,1,1,1,1,5,5,3,4,4,4,5,3,4,1,4,3,3,2,1,1,3,3,3,2,1,3,5,2,3,4,2,5,4,5,4,4,2,2,3,3,3,3,5,4,2,3,1,2,1,1,2,2,5,1,1,4,1,5,3,2,1,4,1,5,1,4,5,2,1,1,1,4,5,4,2,4,5,4,2,4,4,1,1,2,2,1,1,2,3,3,2,5,2,1,1,2,1,1,1,3,2,3,1,5,4,5,3,3,2,1,1,1,3,5,1,1,4,4,5,4,3,3,3,3,2,4,5,2,1,1,1,4,2,4,2,2,5,5,5,4,1,1,5,1,5,2,1,3,3,2,5,2,1,2,4,3,3,1,5,4,1,1,1,4,2,5,5,4,4,3,4,3,1,5,5,2,5,4,2,3,4,1,1,4,4,3,4,1,3,4,1,1,4,3,2,2,5,3,1,4,4,4,1,3,4,3,1,5,3,3,5,5,4,4,1,2,4,2,2,3,1,1,4,5,3,1,1,1,1,3,5,4,1,1,2,1,1,2,1,2,3,1,1,3,2,2,5,5,1,5,5,1,4,4,3,5,4,4"
        .split(",")
        .map(i => parseInt(i))
        .forEach(i => {
            H[i]++;
        });
    return H;
}

function draw() {
    background("#10101a");
    stroke('rgb(204, 204, 204)');
    strokeWeight(0.2);

    fill("rgb(204, 204, 204)");
    textSize(32)
    text("days: " + N, 10, 30);

    H = makeH();
    for (t = 0; t < N && t < 256; ++t) {
        H[(t + 7) % 9] += H[t % 9];
    }

    let M = BigInt(0)
    let S = BigInt(0)
    for (t = 0; t < 9; ++t) {
        if (H[t] > M) M = H[t];
        //console.log(H[t])
        S += BigInt(H[t]);
    }
    if (M === 0n)
        M = 1n

    for (t = 0; t < 9; ++t) {
        fill("rgb(204, 204, 204)");
        textSize(20)
        text(t, 95 + t * 100, 60);

        let X = 100n * H[t];
        X = X / M;
        let Z = Number(X);

        stroke('rgb(255, 255, 102)');
        fill(255, 255, 102);
        rect(50 + t * 100, 80, 90, 1.5*Z);
    }

    fill("rgb(204, 204, 204)");
    textSize(20)
    text("Fishes: " + S.toLocaleString(), 50, 370);

    if (N < 256) N++;
}